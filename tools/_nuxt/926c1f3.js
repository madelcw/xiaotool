(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1557:function(e,t,r){"use strict";r(553)},1558:function(e,t,r){var o=r(3)(!1);o.push([e.i,".screen_record .nya-select{margin-bottom:.9375rem}",""]),e.exports=o},1648:function(e,t,r){"use strict";r.r(t);var o=r(7),n=(r(50),r(18),{name:"ScreenRecord",head:function(){return this.$store.state.currentTool.head},data:function(){return{aspectRatio:"default",aspectRatioList:{default:"默认",1.77:"16:9",1.33:"4:3",2.35:"21:9",1.4:"14:10",1.9:"19:10"},frameRate:"default",frameRateList:{default:"默认",60:"60",30:"30",25:"25",15:"15",5:"5"},resolutions:"default",resolutionsList:{default:"默认","fit-screen":"屏幕尺寸","4K":"4k","1080p":"1080p","720p":"720p"},cursor:"default",cursorList:{default:"默认",always:"是",never:"否"},mediaRecorder:null,mediaStream:null,recordeBlods:[],previewUrl:""}},watch:{mediaStream:{handler:function(){(this.$refs.video||{}).srcObject=this.mediaStream},immediate:!0}},methods:{recorde:function(){this.mediaStream?this.stop():this.start()},start:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.mediaRecorder=null,e.mediaStream=null,e.recordeBlods=[],t.prev=3,r=e.getDisplayMediaOptions(),t.next=7,navigator.mediaDevices.getDisplayMedia(r);case 7:e.mediaStream=t.sent,e.mediaStream.oninactive=function(){this.stop()}.bind(e),e.mediaRecorder=new MediaRecorder(e.mediaStream),e.mediaRecorder.ondataavailable=e.handleDataAvailable,e.mediaRecorder.start(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),e.$modal.show("dialog",{title:t.t0.name,text:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[3,14]])})))()},stop:function(){this.mediaStream&&(this.mediaStream.getTracks().forEach((function(track){track.stop()})),this.mediaStream=null,this.mediaRecorder.stop())},handleDataAvailable:function(e){e.data.size>0&&(this.recordeBlods.push(e.data),this.createPreviewVideo())},createPreviewVideo:function(){var e=new Blob(this.recordeBlods,{type:"video/webm"});this.recordeBlods=[],this.previewUrl=URL.createObjectURL(e)},getDisplayMediaOptions:function(){var e={};return"default"!==this.aspectRatio&&(e.aspectRatio=this.aspectRatio),"default"!==this.frameRate&&(e.frameRate=this.frameRate),"default"!==this.cursor&&(e.cursor=this.cursor),"default"!==this.resolutions&&("fit-screen"===this.resolutions&&(e.width=screen.width,e.height=screen.height),"4K"===this.resolutions&&(e.width=3840,e.height=2160),"1080p"===this.resolutions&&(e.width=1920,e.height=1080),"720p"===this.resolutions&&(e.width=1280,e.height=720)),{video:e,audio:!1}}}}),l=(r(1557),r(2)),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"screen_record"},[r("nya-container",{attrs:{title:"屏幕录制"}},[r("nya-select",{attrs:{fullwidth:"",items:e.aspectRatioList,label:"选择长宽比"},model:{value:e.aspectRatio,callback:function(t){e.aspectRatio=t},expression:"aspectRatio"}}),e._v(" "),r("nya-select",{attrs:{fullwidth:"",items:e.frameRateList,label:"选择帧率"},model:{value:e.frameRate,callback:function(t){e.frameRate=t},expression:"frameRate"}}),e._v(" "),r("nya-select",{attrs:{fullwidth:"",items:e.resolutionsList,label:"选择分辨率"},model:{value:e.resolutions,callback:function(t){e.resolutions=t},expression:"resolutions"}}),e._v(" "),r("nya-select",{attrs:{fullwidth:"",items:e.cursorList,label:"是否显示光标"},model:{value:e.cursor,callback:function(t){e.cursor=t},expression:"cursor"}}),e._v(" "),r("button",{staticClass:"nya-btn",attrs:{type:"button"},on:{click:e.recorde}},[e._v("\n            "+e._s(e.mediaStream?"停 止":"开 始")+"\n        ")])],1),e._v(" "),r("nya-container",{directives:[{name:"show",rawName:"v-show",value:e.mediaStream,expression:"mediaStream"}],attrs:{title:"实时预览"}},[r("video",{ref:"video",staticStyle:{width:"100%"},attrs:{autoplay:""}})]),e._v(" "),r("nya-container",{directives:[{name:"show",rawName:"v-show",value:e.previewUrl&&!e.mediaStream,expression:"previewUrl && !mediaStream"}],attrs:{title:"预览"}},[r("video",{ref:"preview",staticStyle:{width:"100%"},attrs:{src:e.previewUrl,loop:"",controls:"",autoplay:""}})]),e._v(" "),r("nya-container",{attrs:{title:"说明"}},[r("ul",{staticClass:"nya-list"},[r("li",[e._v("选项设置不生效？Chrome 了解一下！")]),e._v(" "),r("li",[e._v("\n                无法使用？\n                "),r("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/MediaDevices/getDisplayMedia",target:"_blank",rel:"noopener noreferrer"}},[e._v("点击")]),e._v("查询兼容性\n            ")]),e._v(" "),r("li",[e._v("是的，不支持录制系统/麦克风音频。")]),e._v(" "),r("li",[e._v("使用开源版本部署时请启用 SSL")])])])],1)}),[],!1,null,null,null);t.default=component.exports},553:function(e,t,r){var content=r(1558);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(4).default)("f8c40e42",content,!0,{sourceMap:!1})}}]);